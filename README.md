# Testicus
Testicus - это приложение в котором вы можете проходить чужие и создавать собственные тесты.  
Добавлять тесты могут только администраторы и авторизированные пользователи.  
Неавторизированным пользователям доступно только прохождение чужих тестов.  

Изменение чужого контента запрещено.  

____

### Используемые технологии:

* Python  
* Django  
* DjangoRestFramework  

____

### Как запустить проект:

Клонировать репозиторий и перейти в него в командной строке:

```
git clone <web URL/SSH key>
```
```
cd testicus
```

Cоздать и активировать виртуальное окружение:  

```
python3 -m venv env
```

* Если у вас Linux/macOS

    ```
    source env/bin/activate
    ```

* Если у вас windows

    ```
    source env/scripts/activate
    ```

Установить зависимости из файла requirements.txt:

```
pip install -r requirements.txt
```
Перейти в директорию с файлом manage.py по адресу Tescticus/testicus

Выполнить миграции:

```
python3 manage.py makemigrations
```

```
python3 manage.py migrate
```

Запустить проект:

```
python3 manage.py runserver
```

____

### Импорт данных из csv:
В проекте заданные начальные тестовые данные, которые можно импортировать в БД  

Для импорта после применения миграций необходимо выполнить команду:  

```
python3 manage.py import_csv
```

____

### Документация
Документация к проекту доступна по эндпоинтам:  
http://127.0.0.1:8000/redoc/  
http://127.0.0.1:8000/swagger/  

____

### Эндпоинты для неавторизированных пользователей
Для неавторизованных пользователей доступны API эндпоинты связанные с авторизацией и аутентификацией,  
GET запросы к тестам и вопросам, а также POST запрос для проверки решения (сами эндпоинты доступны в документации).  
В фронтендовой части доступны следующие эндпоинты:

* Главная страница  
    http://127.0.0.1:8000/

* Страница конкретного теста  
    http://127.0.0.1:8000/tests/{id}/

* Страница решения теста  
    http://127.0.0.1:8000/tests/{id}/solution/

* Страница с описанием проекта  
    http://127.0.0.1:8000/about/

____

### Авторизация и аутентификация
В проекте испольуется аутентификация по JWT токену.  

* Для авторизации необходимо на эндпоинт  
    http://127.0.0.1:8000/auth/users/  
    Передать JSON следующего образца:  
    {
        "username": "my_username",
        "password": "my_password",
        ...
    }
    При авторизации в JSON можно передать и другие поля базовой модели пользователя Django.  

* Для аутентификации (получения Acces токена) необходимо на эндпоинт
    http://127.0.0.1:8000/auth/jwt/create/  
    Передать JSON следующего образца:
    {
        "username": "my_username",
        "password": "my_password"
    }
    В ответ придет токен доступа и обновления, передавая токен доступа в запросах  
    вы можете использовать большую часть функционала проекта.

____


### Проверка решения
Проверить решение можно как через API так и через фронтендовую часть проекта:

* Для проверки решения через фронтенд при запущенном проекте перейдите на эндпоинт  
    http://127.0.0.1:8000/tests/{id}/solution/ где {id} - id теста,  
    выберите варианты ответов и нажмите на кнопку проверить.  
    Во всплывающем окне покажет ваш результат.

* Для проверки решения теста через прямое обращение к API необходмио на ендпоинт  
    http://127.0.0.1:8000/api/v1/tests/{id}/solution где {id} - id теста,  
    Передать JSON следующего образца:
    ```
    {
        "solutions": [
            {
                "question_id": id,
                "answer_id": id
            },
            {
                "question_id": id,
                "answer_id": id
            }
            ...
        ]
    }
    ```
    где:  
    "solutions" - список вопросов и ответов,  
    "question_id" - id вопроса,  
    "answer_id" - id ответа на соответствующий вопрос

____

### Добавление изображений к тестам/вопросам/ответам:
Изображения для передачи необходимо закодировать в base64  
и добавить в JSON под ключем "image" в виде строки,  
изображения сохраняются в проекте в формате переданном в base64.  

____